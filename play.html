<!DOCTYPE html>
<html>
  <head>
    <title>DCPU-16 emulator</title>
    <script type="text/javascript" src="js/common.js?v=1"></script>
    <script type="text/javascript" src="js/assembler.js?v=2"></script>
    <script type="text/javascript" src="js/disassembler.js?v=1"></script>
    <script type="text/javascript" src="js/emulator.js?v=1"></script>
    <script type="text/javascript" src="js/clock.js?v=2"></script>
    <script type="text/javascript" src="js/screen.js?v=1"></script>
    <script type="text/javascript" src="js/keyboard.js?v=1"></script>
    <script type="text/javascript" src="js/fonts.js?v=1"></script>
    <link rel="stylesheet" href="css/bootstrap-2.0.3.css">
    <link rel="stylesheet" href="css/play.css">
  </head>
  <body>
    <iframe name="ack" src="rom/clock.dcpu.txt?v=9" style="display:none"></iframe>
    <section id="header">
      <h3>DCPU-16 Assembler, Emulator &amp; Disassembler</h3>
      <div class="notice">by deNULL. Report any problems at <a href="mailto:me@denull.ru">me@denull.ru</a>.</div>
    </section>

    <section class="noscroll" id="body">
      <div class="row-fluid main noscroll" style="height: 100%">
        <div class="span8 noscroll" id="left_panel">
          <div class="row-fluid" id="tab_row">
            <div class="span1"></div>
            <div class="span7 tabs">
              <a onclick="toggleTab(0)" class="tab pointer tab_active" id="tab0">Assembler</a>
              <a onclick="toggleTab(1)" class="tab pointer tab_inactive" id="tab1">Disassembler</a>
              <a onclick="toggleTab(2)" class="tab pointer tab_inactive" id="tab2">Memory Dump</a>
            </div>
            <div class="span4"></div>
          </div>
          <div class="row-fluid tab_content" id="tab0_wrapper">
            <div class="span1 mono pointer linenums">
              <div>
                <span id="line_highlight"></span>
              </div>
              <div id="linenums">
                <span class="linenum" id="ln1">1</span>
                <span class="linenum breakpoint" id="ln2">2</span>
                <span class="linenum" id="ln3">3</span>
              </div>
            </div>
            <div class="span7 editor_div">
              <textarea class="mono editor" id="code" onkeyup="assemble()" onchange="assemble()" wrap=off spellcheck="false">
; your code here
</textarea>
            </div>
            <div class="span1 mono linenums addr" id="offsets">
            </div>
            <div class="span3 mono dump" id="dump">
            </div>
          </div>
          <div class="row-fluid tab_content" id="tab1_wrapper">
            <div class="span1 mono linenums">
            </div>
            <div class="span4 editor_div">
              <textarea class="mono editor" id="da_input" onkeyup="disassemble()" onchange="disassemble()" wrap=off spellcheck="false">
              </textarea>
            </div>
            <div class="span1 mono linenums addr" id="da_lines">
            </div>
            <div class="span6 mono dump" id="da_code">
            </div>
          </div>
          <div class="row-fluid tab_content" id="tab2_wrapper" onscroll="updateMemoryView()">
            <div id="md_view">
              <div class="span1 mono linenums" id="md_lines">
              </div>
              <div class="span7 mono editor_div" id="md_dump">
              </div>
              <div class="span1 mono linenums addr" id="md_unused">
              </div>
              <div class="span3 mono dump" id="md_code">
              </div>
            </div>
          </div>
        </div>
        <div class="span4 noscroll">
          <div class="screen_frame">
            <canvas id="screen" width="384" height="288"></canvas>
            <img id="loading_overlay" src="http://i.imgur.com/DcNzS.png" width="384" height="288"/>
          </div>
          <div class="notice">Keyboard input is available while the program is running.</div>
          <div class="row-fluid buttons">
            <div class="span4">
              <button onclick="run(this)" id="button_run">&#8595; Run (F5)</button>
            </div>
            <div class="span4">
              <button onclick="step()">&#8618; Step (F6)</button>
            </div>
            <div class="span4">
              <button onclick="reset()">&#8634; Reset (F4)</button><br/>
            </div>
          </div>

          <div class="registers">
            <h4>Registers:</h4>
            <table border=0 class="mono">
              <tr>
                <td class="reg_name">PC:</td><td id="regPC" class="cur_pc">0</td>
                <td class="reg_name">SP:</td><td id="regSP" class="cur_sp">0</td>
                <td class="reg_name">IA:</td><td id="regIA" class="cur_ia">0</td>
              </tr>
              <tr>
                <td class="reg_name">A:</td><td id="regA">0</td>
                <td class="reg_name">B:</td><td id="regB">0</td>
                <td class="reg_name">C:</td><td id="regC">0</td>
              </tr>
              <tr>
                <td class="reg_name">X:</td><td id="regX">0</td>
                <td class="reg_name">Y:</td><td id="regY">0</td>
                <td class="reg_name">Z:</td><td id="regZ">0</td>
              </tr>
              <tr>
                <td class="reg_name">I:</td><td id="regI">0</td>
                <td class="reg_name">J:</td><td id="regJ">0</td>
              </tr>
              <tr>
                <td class="reg_name">EX:</td><td id="regEX">0</td>
                <td colspan=4 class="cycles"><span id="cycles">0</span> cycles</td>
              </tr>
            </table>
          </div>

          <div class="row-fluid">
            <button onclick="disassembleDump()" id="disassemble">Disassemble</button>
          </div>
        </div>
      </div>
      <div class="row-fluid log_frame">
        <div class="span12" id="log">
        </div>
      </div>
    </section>
    <script type="text/javascript" src="js/play.js?v=2"></script>
  </body>
</html>
